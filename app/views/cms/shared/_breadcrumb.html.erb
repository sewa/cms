<ul class="breadcrumbs">
  <%= breadcrumb_item(t(:home), content_nodes_path) %>

  <% if controller? :content_nodes %>
    <%= breadcrumb_item(t(:nodes), content_nodes_path, li_class: ('current' if index?)) %>
    <% if @content_node.present? %>
      <% if new? %>
        <% (@content_node.unscoped_ancestors.reverse).each do |node| %>
          <%= breadcrumb_item(node.title, content_node_path(node), li_class: ('current' if node.id == @content_node.id && !edit?)) %>
        <% end %>
        <%= breadcrumb_item(t(:new_node), '#', li_class: 'current') %>
      <% else %>
        <% (@content_node.unscoped_ancestors.reverse + [@content_node]).each do |node| %>
          <% if node.children.present? %>
            <%= breadcrumb_item(node.title, content_node_path(node), li_class: ('current' if node.id == @content_node.id && !edit?)) %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
    <% if edit? %>
      <% if @content_node.children.present? %>
        <%= breadcrumb_item(t(:edit_node), '#', li_class: 'current') %>
      <% else %>
        <%= breadcrumb_item("#{@content_node.title} - #{t(:edit_node)}", '#', li_class: 'current') %>
      <% end %>
    <% end %>
  <% end %>

  <% if controller? :content_images %>
    <%= breadcrumb_item(t(:images), content_images_path, li_class: ('current' if index?)) %>
    <% if new? %>
      <%= breadcrumb_item(t(:new_image), '#', li_class: 'current') %>
    <% elsif edit? %>
      <%= breadcrumb_item(t(:edit_image), '#', li_class: 'current') %>
    <% end %>
  <% end %>

  <% if controller? :content_documents %>
    <%= breadcrumb_item(t(:documents), content_documents_path, li_class: ('current' if index?)) %>
    <% if new? %>
      <%= breadcrumb_item(t(:new_document), '#', li_class: 'current') %>
    <% elsif edit? %>
      <%= breadcrumb_item(t(:edit_document), '#', li_class: 'current') %>
    <% end %>
  <% end %>

  <% if controller? :content_categories %>
    <%= breadcrumb_item(t(:categories), content_categories_path, li_class: ('current' if index?)) %>
    <% if new? %>
      <%= breadcrumb_item(t(:new_category), '#', li_class: 'current') %>
    <% elsif edit? %>
      <%= breadcrumb_item(t(:edit_category), '#', li_class: 'current') %>
    <% end %>
  <% end %>

  <%= yield :breadcrumb %>

</ul>
